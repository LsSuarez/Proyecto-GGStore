@{
    ViewData["Title"] = "Tus Ã“rdenes";
}

<h2 class="mb-4 text-info">Ã“rdenes Realizadas</h2>

<div id="orders-list" class="text-light"></div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const user = localStorage.getItem("gg_logged");
        const orders = JSON.parse(localStorage.getItem("orders") || "[]");
        const container = document.getElementById("orders-list");

        if (!user) {
            container.innerHTML = "<p>ðŸ”’ IniciÃ¡ sesiÃ³n para ver tus Ã³rdenes.</p>";
            return;
        }

        const userOrders = orders.filter(order => order.user === user);

        if (userOrders.length === 0) {
            container.innerHTML = "<p>No tenÃ©s Ã³rdenes todavÃ­a. Â¡Hacete una compra gamer! ðŸŽ®</p>";
            return;
        }

        userOrders.forEach(order => {
            let productosHtml = "<ul>";
            order.items.forEach(item => {
                productosHtml += `<li>${item.name} x${item.quantity}</li>`;
            });
            productosHtml += "</ul>";

            container.innerHTML += `
                <div class="mb-4 p-3 border border-success rounded shadow-sm bg-dark">
                    <h5 class="text-neon mb-2">ðŸ§¾ Orden #${order.id}</h5>
                    <p><strong>Fecha:</strong> ${order.date}</p>
                    <p><strong>Total:</strong> $${order.total.toFixed(2)}</p>
                    <p><strong>Pago con:</strong> ${order.metodoPago}</p>
                    <strong>Productos:</strong>
                    ${productosHtml}
                </div>
            `;
        });
    });
</script>
